<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Movie Night Planner</title>

    <script type="module" src="scripts/main.js"></script>

    <link rel="stylesheet" href="styles/styles.css" />
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        display: flex;
        flex-direction: column;
      }

      .page-wrapper {
        flex: 1;
      }

      .main-footer {
        background-color: #1f1f1f;
        color: #e0e0e0;
        padding: 2rem;
        border-top: 2px solid #e50914;
        font-family: "Open Sans", sans-serif;
      }

      .clear-booking {
        padding: 20px;
      }

      .booking-form-section {
        margin-top: 2rem;
        background-color: #1f1f1f;
        padding: 2rem;
        border-radius: 12px;
        color: white;
        max-width: 600px;
        margin-inline: auto;
      }

      .booking-form-section h2 {
        margin-bottom: 1rem;
        color: #ffd700;
        font-family: "Montserrat", sans-serif;
      }

      .booking-form-section label {
        display: block;
        margin-top: 1rem;
        font-weight: bold;
      }

      .booking-form-section input,
      .booking-form-section textarea,
      .booking-form-section select {
        width: 100%;
        padding: 0.5rem;
        margin-top: 0.3rem;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 1rem;
      }

      .booking-form-section button {
        margin-top: 1.5rem;
        padding: 0.75rem 1.5rem;
        background-color: #e50914;
        color: white;
        font-size: 1rem;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }

      #bookings {
        border: 3px solid yellow;
        border-radius: 8px;
      }

      main {
        display: flex;

        gap: 2rem;
        padding: 2rem;
        flex-wrap: wrap;
      }

      .booking-form-section,
      #booking-movie {
        flex: 1;
        min-width: 300px;
        background-color: #1f1f1f;
        padding: 1.5rem;
        border-radius: 12px;
        color: white;
      }

      #booking-movie {
        display: flex;
        flex-direction: column;
      }

      .clear-booking {
        margin-bottom: 1rem;
        text-align: right;
      }

      .movie-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 1rem;
      }
    </style>
  </head>
  <body>
    <header class="main-header">
      <div class="logo">üé¨ Movie Night Planner</div>
    </header>
    <main>
      <section id="booking-form" class="booking-form-section">
        <h2>üìÖ Plan Your Movie Night</h2>
        <form id="bookingForm">
          <!-- Date and Time -->
          <label for="date">Movie Night Date:</label>
          <input type="date" id="date" name="date" required />

          <label for="time">Time:</label>
          <input type="time" id="time" name="time" required />

          <!-- Guest Emails -->
          <label for="guests">Invite Friends (Emails):</label>
          <textarea
            id="guests"
            name="guests"
            placeholder="Enter emails separated by commas"
            rows="3"
          ></textarea>

          <!-- Popcorn Size -->
          <label for="popcorn">Popcorn Size:</label>
          <select id="popcorn" name="popcorn">
            <option value="small">Small üçø</option>
            <option value="medium">Medium üçø</option>
            <option value="large">Large üçø</option>
          </select>

          <!-- Notes -->
          <label for="notes">Special Notes:</label>
          <textarea
            id="notes"
            name="notes"
            placeholder="e.g. Bring drinks, theme night ideas..."
            rows="3"
          ></textarea>

          <!-- Submit -->
          <button type="submit">üéüÔ∏è Save Booking</button>
        </form>
      </section>

      <section id="booking-movie" aria-label="Movie selected">
        <h1>Movies Selected</h1>
        <div id="bookings" class="movie-grid">
          <!-- Dynamically insert booked movie cards here -->
        </div>
        <div class="clear-booking">
          <button
            id="remove-btn"
            onclick="localStorage.removeItem('bookedMovies'); location.reload();"
          >
            üóëÔ∏è Clear Bookings
          </button>
        </div>
      </section>
    </main>

    <footer class="main-footer">
      <div class="footer-content">
        <div class="footer-info">
          <p>&copy; 2025 Movie Night Planner</p>
          <p>Made with ‚ù§Ô∏è in Victoria, Canada</p>
          <p>Contact: support@movienightplanner.com</p>
        </div>
        <div class="footer-map">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d10510.144942428193!2d-123.365644!3d48.428421!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x548f7387e22c49bb%3A0x820ff72f5bdbf359!2sVictoria%2C%20BC%2C%20Canada!5e0!3m2!1sen!2sca!4v1620214961387!5m2!1sen!2sca"
            width="250"
            height="150"
            style="border: 0"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          >
          </iframe>
        </div>
      </div>
    </footer>

    <script>
      const container = document.getElementById("bookings");
      const bookings = JSON.parse(localStorage.getItem("bookedMovies")) || [];

      if (bookings.length === 0) {
        container.innerHTML = "<p>No movies booked yet.</p>";
      } else {
        bookings.forEach((movie) => {
          const card = document.createElement("div");
          card.className = "movie-card";

          const posterPath = movie.poster_path
            ? `https://image.tmdb.org/t/p/w200${movie.poster_path}`
            : "images/placeholder.png";

          card.innerHTML = `
          <img src='${posterPath}' alt='${movie.title}' />
          <h3>${movie.title}</h3>
          <p>${movie.release_date ? movie.release_date.substring(0, 4) : "N/A"}</p>
        `;

          container.appendChild(card);
        });
      }
    </script>
  </body>
</html>
